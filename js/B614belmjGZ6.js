function ImageFlow(){this.defaults={animationSpeed:50,aspectRatio:1.964,buttons:!1,captions:!0,circular:!1,imageCursor:"default",ImageFlowID:"imageflow",imageFocusM:1,imageFocusMax:4,imagePath:"",imageScaling:!0,imagesHeight:.67,imagesM:1,onClick:function(){document.location=this.url},opacity:!1,opacityArray:[10,8,6,4,2],percentLandscape:118,percentOther:100,preloadImages:!0,reflections:!0,reflectionGET:"",reflectionP:.5,reflectionPNG:!1,reflectPath:"",scrollbarP:.6,slider:!0,sliderCursor:"e-resize",sliderWidth:14,slideshow:!1,slideshowSpeed:1500,slideshowAutoplay:!1,startID:1,glideToStartID:!0,startAnimation:!1,xStep:150};var e=this;this.init=function(t){for(var i in e.defaults)this[i]=void 0!==t&&void 0!==t[i]?t[i]:e.defaults[i];var o=document.getElementById(e.ImageFlowID);if(o&&(o.style.visibility="visible",this.ImageFlowDiv=o,this.createStructure())){this.imagesDiv=document.getElementById(e.ImageFlowID+"_images"),this.captionDiv=document.getElementById(e.ImageFlowID+"_caption"),this.navigationDiv=document.getElementById(e.ImageFlowID+"_navigation"),this.scrollbarDiv=document.getElementById(e.ImageFlowID+"_scrollbar"),this.sliderDiv=document.getElementById(e.ImageFlowID+"_slider"),this.buttonNextDiv=document.getElementById(e.ImageFlowID+"_next"),this.buttonPreviousDiv=document.getElementById(e.ImageFlowID+"_previous"),this.buttonSlideshow=document.getElementById(e.ImageFlowID+"_slideshow"),this.indexArray=[],this.current=0,this.imageID=0,this.target=0,this.memTarget=0,this.firstRefresh=!0,this.firstCheck=!0,this.busy=!1;var a=this.ImageFlowDiv.offsetWidth,n=Math.round(a/e.aspectRatio);document.getElementById(e.ImageFlowID+"_loading_txt").style.paddingTop=.5*n-22+"px",o.style.height=n+"px",this.loadingProgress()}},this.createStructure=function(){for(var t,i,o,a,n=e.Helper.createDocumentElement("div","images"),s=e.ImageFlowDiv.childNodes.length,d=0;d<s;d++)(t=e.ImageFlowDiv.childNodes[d])&&1==t.nodeType&&"IMG"==t.nodeName&&(!0===e.reflections&&(i=e.reflectionPNG?"3":"2",o=e.imagePath+t.getAttribute("src",2),o=e.reflectPath+"/frontend/web/reflect"+i+".php?img="+o+e.reflectionGET,t.setAttribute("src",o)),a=t.cloneNode(!0),n.appendChild(a));if(e.circular){var l=e.Helper.createDocumentElement("div","images"),r=e.Helper.createDocumentElement("div","images");if((s=n.childNodes.length)<e.imageFocusMax&&(e.imageFocusMax=s),s>1){var c;for(c=0;c<s;c++)t=n.childNodes[c],c<e.imageFocusMax&&(a=t.cloneNode(!0),l.appendChild(a)),s-c<e.imageFocusMax+1&&(a=t.cloneNode(!0),r.appendChild(a));for(c=0;c<s;c++)a=(t=n.childNodes[c]).cloneNode(!0),r.appendChild(a);for(c=0;c<e.imageFocusMax;c++)a=(t=l.childNodes[c]).cloneNode(!0),r.appendChild(a);n=r}}if(e.slideshow){var u=e.Helper.createDocumentElement("div","slideshow");n.appendChild(u)}var m=e.Helper.createDocumentElement("p","loading_txt"),h=document.createTextNode(" ");m.appendChild(h);var g=e.Helper.createDocumentElement("div","loading"),v=e.Helper.createDocumentElement("div","loading_bar");g.appendChild(v);var p=e.Helper.createDocumentElement("div","caption"),D=e.Helper.createDocumentElement("div","scrollbar"),f=e.Helper.createDocumentElement("div","slider");if(D.appendChild(f),e.buttons){var w=e.Helper.createDocumentElement("div","previous","button"),y=e.Helper.createDocumentElement("div","next","button");D.appendChild(w),D.appendChild(y)}var I=e.Helper.createDocumentElement("div","navigation");I.appendChild(p),I.appendChild(D);var x=!1;if(e.ImageFlowDiv.appendChild(n)&&e.ImageFlowDiv.appendChild(m)&&e.ImageFlowDiv.appendChild(g)&&e.ImageFlowDiv.appendChild(I)){for(s=e.ImageFlowDiv.childNodes.length,d=0;d<s;d++)(t=e.ImageFlowDiv.childNodes[d])&&1==t.nodeType&&"IMG"==t.nodeName&&e.ImageFlowDiv.removeChild(t);x=!0}return x},this.loadingProgress=function(){var t=e.loadingStatus();(t<100||e.firstCheck)&&e.preloadImages?e.firstCheck&&100==t?(e.firstCheck=!1,window.setTimeout(e.loadingProgress,100)):window.setTimeout(e.loadingProgress,40):(document.getElementById(e.ImageFlowID+"_loading_txt").style.display="none",document.getElementById(e.ImageFlowID+"_loading").style.display="none",window.setTimeout(e.Helper.addResizeEvent,1e3),e.refresh(),e.max>1&&(e.MouseWheel.init(),e.MouseDrag.init(),e.Touch.init(),e.Key.init(),e.slideshow&&e.Slideshow.init(),e.slider&&(e.scrollbarDiv.style.visibility="visible")))},this.loadingStatus=function(){for(var t=e.imagesDiv.childNodes.length,i=0,o=0,a=null,n=0;n<t;n++)(a=e.imagesDiv.childNodes[n])&&1==a.nodeType&&"IMG"==a.nodeName&&(a.complete&&o++,i++);var s=Math.round(o/i*100);document.getElementById(e.ImageFlowID+"_loading_bar").style.width=s+"%",e.circular&&(i-=2*e.imageFocusMax,o=s<1?0:Math.round(i/100*s));var d=document.getElementById(e.ImageFlowID+"_loading_txt"),l=document.createTextNode("loading images "+o+"/"+i);return d.replaceChild(l,d.firstChild),s},this.refresh=function(){this.imagesDivWidth=e.imagesDiv.offsetWidth+e.imagesDiv.offsetLeft,this.maxHeight=Math.round(e.imagesDivWidth/e.aspectRatio),this.maxFocus=e.imageFocusMax*e.xStep,this.size=.5*e.imagesDivWidth,this.sliderWidth=.5*e.sliderWidth,this.scrollbarWidth=(e.imagesDivWidth-2*Math.round(e.sliderWidth))*e.scrollbarP,this.imagesDivHeight=Math.round(e.maxHeight*e.imagesHeight),e.ImageFlowDiv.style.height=e.maxHeight+"px",e.imagesDiv.style.height=e.imagesDivHeight+"px",e.navigationDiv.style.height=e.maxHeight-e.imagesDivHeight+"px",e.captionDiv.style.width=e.imagesDivWidth+"px",e.captionDiv.style.paddingTop=Math.round(.02*e.imagesDivWidth)+"px",e.scrollbarDiv.style.width=e.scrollbarWidth+"px",e.scrollbarDiv.style.marginTop=Math.round(.02*e.imagesDivWidth)+"px",e.scrollbarDiv.style.marginLeft=Math.round(e.sliderWidth+(e.imagesDivWidth-e.scrollbarWidth)/2)+"px",e.sliderDiv.style.cursor=e.sliderCursor,e.sliderDiv.onmousedown=function(){return e.MouseDrag.start(this),!1},e.buttons&&(e.buttonPreviousDiv.onclick=function(){e.MouseWheel.handle(1)},e.buttonNextDiv.onclick=function(){e.MouseWheel.handle(-1)});for(var t=!0===e.reflections?e.reflectionP+1:1,i=e.imagesDiv.childNodes.length,o=0,a=null,n=0;n<i;n++)null!==(a=e.imagesDiv.childNodes[n])&&1==a.nodeType&&"IMG"==a.nodeName&&(this.indexArray[o]=n,a.url=a.getAttribute("longdesc"),a.xPosition=-o*e.xStep,a.i=o,e.firstRefresh&&(null!==a.getAttribute("width")&&null!==a.getAttribute("height")?(a.w=a.getAttribute("width"),a.h=a.getAttribute("height")*t):(a.w=a.width,a.h=a.height)),a.w>a.h/(e.reflectionP+1)?(a.pc=e.percentLandscape,a.pcMem=e.percentLandscape):(a.pc=e.percentOther,a.pcMem=e.percentOther),!1===e.imageScaling&&(a.style.position="relative",a.style.display="inline"),a.style.cursor=e.imageCursor,o++);this.max=e.indexArray.length,!1===e.imageScaling&&(a=e.imagesDiv.childNodes[e.indexArray[0]],this.totalImagesWidth=a.w*e.max,a.style.paddingLeft=e.imagesDivWidth/2+a.w/2+"px",e.imagesDiv.style.height=a.h+"px",e.navigationDiv.style.height=e.maxHeight-a.h+"px"),e.firstRefresh&&(e.firstRefresh=!1,e.imageID=e.startID-1,e.imageID<0&&(e.imageID=0),e.circular&&(e.imageID=e.imageID+e.imageFocusMax),maxId=e.circular?e.max-e.imageFocusMax-1:e.max-1,e.imageID>maxId&&(e.imageID=maxId),!1===e.glideToStartID&&e.moveTo(-e.imageID*e.xStep),e.startAnimation&&e.moveTo(5e3)),e.max>1&&e.glideTo(e.imageID),e.moveTo(e.current)},this.moveTo=function(t){this.current=t,this.zIndex=e.max;for(var i=0;i<e.max;i++){var o=e.imagesDiv.childNodes[e.indexArray[i]],a=i*-e.xStep;if(e.imageScaling)if(a+e.maxFocus<e.memTarget||a-e.maxFocus>e.memTarget)o.style.visibility="hidden",o.style.display="none";else{var n=(Math.sqrt(1e4+t*t)+100)*e.imagesM,s=t/n*e.size+e.size;o.style.display="block";var d=o.h/o.w*o.pc/n*e.size,l=0;switch(d>e.maxHeight){case!1:l=o.pc/n*e.size;break;default:d=e.maxHeight,l=o.w*d/o.h}var r=e.imagesDivHeight-d+d/(e.reflectionP+1)*e.reflectionP;switch(o.style.left=s-o.pc/2/n*e.size+"px",l&&d&&(o.style.height=d+"px",o.style.width=l+"px",o.style.top=r+"px"),o.style.visibility="visible",t<0){case!0:this.zIndex++;break;default:this.zIndex=e.zIndex-1}switch(o.i==e.imageID){case!1:o.onclick=function(){e.glideTo(this.i)};break;default:this.zIndex=e.zIndex+1,""!==o.url&&(o.onclick=e.onClick)}o.style.zIndex=e.zIndex}else{if(a+e.maxFocus<e.memTarget||a-e.maxFocus>e.memTarget)o.style.visibility="hidden";else switch(o.style.visibility="visible",o.i==e.imageID){case!1:o.onclick=function(){e.glideTo(this.i)};break;default:""!==o.url&&(o.onclick=e.onClick)}e.imagesDiv.style.marginLeft=t-e.totalImagesWidth+"px"}t+=e.xStep}},this.glideTo=function(t){var i,o;e.circular&&(t+1===e.imageFocusMax&&(i=-(o=e.max-e.imageFocusMax)*e.xStep,t=o-1),t===e.max-e.imageFocusMax&&(i=-(o=e.imageFocusMax-1)*e.xStep,t=o+1));var a=-t*e.xStep;this.target=a,this.memTarget=a,this.imageID=t;var n=e.imagesDiv.childNodes[t].getAttribute("alt");if(""!==n&&!1!==e.captions||(n="&nbsp;"),e.captionDiv.innerHTML=n,!1===e.MouseDrag.busy&&(e.circular?this.newSliderX=(t-e.imageFocusMax)*e.scrollbarWidth/(e.max-2*e.imageFocusMax-1)-e.MouseDrag.newX:this.newSliderX=t*e.scrollbarWidth/(e.max-1)-e.MouseDrag.newX,e.sliderDiv.style.marginLeft=e.newSliderX-e.sliderWidth+"px"),!0===e.opacity||e.imageFocusM!==e.defaults.imageFocusM){e.Helper.setOpacity(e.imagesDiv.childNodes[t],e.opacityArray[0]),e.imagesDiv.childNodes[t].pc=e.imagesDiv.childNodes[t].pc*e.imageFocusM;for(var s=0,d=0,l=0,r=e.opacityArray.length,c=1;c<e.imageFocusMax+1;c++)s=c+1>r?e.opacityArray[r-1]:e.opacityArray[c],l=t-c,(d=t+c)<e.max&&(e.Helper.setOpacity(e.imagesDiv.childNodes[d],s),e.imagesDiv.childNodes[d].pc=e.imagesDiv.childNodes[d].pcMem),l>=0&&(e.Helper.setOpacity(e.imagesDiv.childNodes[l],s),e.imagesDiv.childNodes[l].pc=e.imagesDiv.childNodes[l].pcMem)}i&&e.moveTo(i),!1===e.busy&&(e.busy=!0,e.animate())},this.animate=function(){switch(e.target<e.current-1||e.target>e.current+1){case!0:e.moveTo(e.current+(e.target-e.current)/3),window.setTimeout(e.animate,e.animationSpeed),e.busy=!0;break;default:e.busy=!1}},this.glideOnEvent=function(t){e.slideshow&&e.Slideshow.interrupt(),e.glideTo(t)},this.Slideshow={direction:1,init:function(){e.slideshowAutoplay?e.Slideshow.start():e.Slideshow.stop()},interrupt:function(){e.Helper.removeEvent(e.ImageFlowDiv,"click",e.Slideshow.interrupt),e.Slideshow.stop()},addInterruptEvent:function(){e.Helper.addEvent(e.ImageFlowDiv,"click",e.Slideshow.interrupt)},start:function(){e.Helper.setClassName(e.buttonSlideshow,"slideshow pause"),e.buttonSlideshow.onclick=function(){e.Slideshow.stop()},e.Slideshow.action=window.setInterval(e.Slideshow.slide,e.slideshowSpeed),window.setTimeout(e.Slideshow.addInterruptEvent,100)},stop:function(){e.Helper.setClassName(e.buttonSlideshow,"slideshow play"),e.buttonSlideshow.onclick=function(){e.Slideshow.start()},window.clearInterval(e.Slideshow.action)},slide:function(){var t=e.imageID+e.Slideshow.direction,i=!1;t===e.max&&(e.Slideshow.direction=-1,i=!0),t<0&&(e.Slideshow.direction=1,i=!0),i?e.Slideshow.slide():e.glideTo(t)}},this.MouseWheel={init:function(){window.addEventListener&&e.ImageFlowDiv.addEventListener("DOMMouseScroll",e.MouseWheel.get,!1),e.Helper.addEvent(e.ImageFlowDiv,"mousewheel",e.MouseWheel.get)},get:function(t){var i=0;t||(t=window.event),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i&&e.MouseWheel.handle(i),e.Helper.suppressBrowserDefault(t)},handle:function(t){var i=!1,o=0;t>0?e.imageID>=1&&(o=e.imageID-1,i=!0):e.imageID<e.max-1&&(o=e.imageID+1,i=!0),i&&e.glideOnEvent(o)}},this.MouseDrag={object:null,objectX:0,mouseX:0,newX:0,busy:!1,init:function(){e.Helper.addEvent(e.ImageFlowDiv,"mousemove",e.MouseDrag.drag),e.Helper.addEvent(e.ImageFlowDiv,"mouseup",e.MouseDrag.stop),e.Helper.addEvent(document,"mouseup",e.MouseDrag.stop),e.ImageFlowDiv.onselectstart=function(){var t=!0;return e.MouseDrag.busy&&(t=!1),t}},start:function(t){e.MouseDrag.object=t,e.MouseDrag.objectX=e.MouseDrag.mouseX-t.offsetLeft+e.newSliderX},stop:function(){e.MouseDrag.object=null,e.MouseDrag.busy=!1},drag:function(t){var i=0;if(t||(t=window.event),t.pageX?i=t.pageX:t.clientX&&(i=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),e.MouseDrag.mouseX=i,null!==e.MouseDrag.object){var o,a,n=e.MouseDrag.mouseX-e.MouseDrag.objectX+e.sliderWidth;n<-e.newSliderX&&(n=-e.newSliderX),n>e.scrollbarWidth-e.newSliderX&&(n=e.scrollbarWidth-e.newSliderX),e.circular?(o=(n+e.newSliderX)/(e.scrollbarWidth/(e.max-2*e.imageFocusMax-1)),a=Math.round(o)+e.imageFocusMax):(o=(n+e.newSliderX)/(e.scrollbarWidth/(e.max-1)),a=Math.round(o)),e.MouseDrag.newX=n,e.MouseDrag.object.style.left=n+"px",e.imageID!==a&&e.glideOnEvent(a),e.MouseDrag.busy=!0}}},this.Touch={x:0,startX:0,stopX:0,busy:!1,first:!0,init:function(){e.Helper.addEvent(e.navigationDiv,"touchstart",e.Touch.start),e.Helper.addEvent(document,"touchmove",e.Touch.handle),e.Helper.addEvent(document,"touchend",e.Touch.stop)},isOnNavigationDiv:function(t){var i=!1;if(t.touches){var o=t.touches[0].target;o!==e.navigationDiv&&o!==e.sliderDiv&&o!==e.scrollbarDiv||(i=!0)}return i},getX:function(e){var t=0;return e.touches&&(t=e.touches[0].pageX),t},start:function(t){e.Touch.startX=e.Touch.getX(t),e.Touch.busy=!0,e.Helper.suppressBrowserDefault(t)},isBusy:function(){var t=!1;return e.Touch.busy&&(t=!0),t},handle:function(t){if(e.Touch.isBusy&&e.Touch.isOnNavigationDiv(t)){var i=e.circular?e.max-2*e.imageFocusMax-1:e.max-1;e.Touch.first&&(e.Touch.stopX=(i-e.imageID)*(e.imagesDivWidth/i),e.Touch.first=!1);var o=-(e.Touch.getX(t)-e.Touch.startX-e.Touch.stopX);o<0&&(o=0),o>e.imagesDivWidth&&(o=e.imagesDivWidth),e.Touch.x=o;var a=Math.round(o/(e.imagesDivWidth/i));a=i-a,e.imageID!==a&&(e.circular&&(a+=e.imageFocusMax),e.glideOnEvent(a)),e.Helper.suppressBrowserDefault(t)}},stop:function(){e.Touch.stopX=e.Touch.x,e.Touch.busy=!1}},this.Key={init:function(){document.onkeydown=function(t){e.Key.handle(t)}},handle:function(t){switch(e.Key.get(t)){case 39:e.MouseWheel.handle(-1);break;case 37:e.MouseWheel.handle(1)}},get:function(e){return(e=e||window.event).keyCode}},this.Helper={addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&(e["e"+t+i]=i,e[t+i]=function(){e["e"+t+i](window.event)},e.attachEvent("on"+t,e[t+i]))},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&(void 0===e[t+i]&&alert("Helper.removeEvent » Pointer to detach event is undefined - perhaps you are trying to detach an unattached event?"),e.detachEvent("on"+t,e[t+i]),e[t+i]=null,e["e"+t+i]=null)},setOpacity:function(t,i){!0===e.opacity&&(t.style.opacity=i/10,t.style.filter="alpha(opacity="+10*i+")")},createDocumentElement:function(t,i,o){var a=document.createElement(t);return a.setAttribute("id",e.ImageFlowID+"_"+i),void 0!==o&&(i+=" "+o),e.Helper.setClassName(a,i),a},setClassName:function(e,t){e&&(e.setAttribute("class",t),e.setAttribute("className",t))},suppressBrowserDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},addResizeEvent:function(){var t=window.onresize;"function"!=typeof window.onresize?window.onresize=function(){e.refresh()}:window.onresize=function(){t&&t(),e.refresh()}}}}var domReadyEvent={name:"domReadyEvent",events:{},domReadyID:1,bDone:!1,DOMContentLoadedCustom:null,add:function(e){e.$$domReadyID||(e.$$domReadyID=this.domReadyID++,this.bDone&&e(),this.events[e.$$domReadyID]=e)},remove:function(e){e.$$domReadyID&&delete this.events[e.$$domReadyID]},run:function(){if(!this.bDone)for(var e in this.bDone=!0,this.events)this.events[e]()},schedule:function(){if(!this.bDone){if(/KHTML|WebKit/i.test(navigator.userAgent))/loaded|complete/.test(document.readyState)?this.run():setTimeout(this.name+".schedule()",100);else if(document.getElementById("__ie_onload"))return!0;return"function"==typeof this.DOMContentLoadedCustom&&(void 0===document.getElementsByTagName||null===document.getElementsByTagName("body")[0]&&null===document.body||(this.DOMContentLoadedCustom()?this.run():setTimeout(this.name+".schedule()",250))),!0}},init:function(){function e(){domReadyEvent.run()}if(document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){domReadyEvent.run()}),!1),setTimeout("domReadyEvent.schedule()",100),"undefined"!=typeof addEvent)addEvent(window,"load",e);else if(document.addEventListener)document.addEventListener("load",e,!1);else if("function"==typeof window.onload){var t=window.onload;window.onload=function(){domReadyEvent.run(),t()}}else window.onload=e;
/*@cc_on
			@if (@_win32 || @_win64)
			document.write("<script id=__ie_onload defer src=\"//:\"><\/script>");
			var script = document.getElementById("__ie_onload");
			script.onreadystatechange = function()
			{
				if (this.readyState == "complete")
				{
					domReadyEvent.run(); // call the onload handler
				}
			};
			@end
		@*/}},domReady=function(e){domReadyEvent.add(e)};domReadyEvent.init(),domReady((function(){(new ImageFlow).init({ImageFlowID:"myImageFlow"})}));